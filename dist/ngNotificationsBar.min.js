/*! ng-notifications-bar - v0.0.16 (http://beletsky.net/ng-notifications-bar/) */
!function(root,factory){"use strict";"object"==typeof exports?module.exports=factory(root,require("angular")):"function"==typeof define&&define.amd?define(["angular"],function(angular){return root.ngNotificationsBar=factory(root,angular)}):root.ngNotificationsBar=factory(root,root.angular)}(this,function(window,angular){"use strict";var module=angular.module("ngNotificationsBar",[]);return module.provider("notificationsConfig",function(){function setHideDelay(value){config.hideDelay=value}function getHideDelay(){return config.hideDelay}function setAcceptHTML(value){config.acceptHTML=value}function getAcceptHTML(){return config.acceptHTML}function setAutoHide(value){config.autoHide=value}function setAutoHideAnimation(value){config.autoHideAnimation=value}function getAutoHideAnimation(){return config.autoHideAnimation}function setAutoHideAnimationDelay(value){config.autoHideAnimationDelay=value}function getAutoHideAnimationDelay(){return config.autoHideAnimationDelay}function getAutoHide(){return config.autoHide}function setAutoMaxNotifications(value){config.maxNotifications=value}function getAutoMaxNotifications(){return config.maxNotifications}var config={};return{setHideDelay:setHideDelay,setAutoHide:setAutoHide,setAutoHideAnimation:setAutoHideAnimation,setAutoHideAnimationDelay:setAutoHideAnimationDelay,setAcceptHTML:setAcceptHTML,setAutoMaxNotifications:setAutoMaxNotifications,$get:function(){return{getHideDelay:getHideDelay,getAutoHide:getAutoHide,getAutoHideAnimation:getAutoHideAnimation,getAutoHideAnimationDelay:getAutoHideAnimationDelay,getAcceptHTML:getAcceptHTML,getAutoMaxNotifications:getAutoMaxNotifications}}}}),module.factory("notifications",["$rootScope",function($rootScope){var showError=function(message){$rootScope.$broadcast("notifications:error",message)},showWarning=function(message){$rootScope.$broadcast("notifications:warning",message)};return{showError:showError,showInfo:function(message){$rootScope.$broadcast("notifications:info",message)},showWarning:showWarning,showSuccess:function(message){$rootScope.$broadcast("notifications:success",message)},closeAll:function(){$rootScope.$broadcast("notifications:closeAll")}}}]),module.directive("notificationsBar",["notificationsConfig","$timeout","$document",function(notificationsConfig,$timeout,$document){return{restrict:"EA",template:function(elem,attr){var acceptHTML=notificationsConfig.getAcceptHTML()||!1,iconClasses=attr.closeicon||"glyphicon glyphicon-remove";return acceptHTML?'\t\t\t\t\t<div class="notifications-container" ng-if="notifications.length">\t\t\t\t\t\t<div class="notification {{note.type}}" ng-repeat="note in notifications" ng-class="{\'note-close\': note.close}" ng-class="note.animation">\t\t\t\t\t\t\t<span class="message" compile="note.message"></span>\t\t\t\t\t\t\t<span class="'+iconClasses+' close-click" ng-click="close($index)"></span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t':'\t\t\t\t\t<div class="notifications-container" ng-if="notifications.length">\t\t\t\t\t\t<div class="notification {{note.type}} note-{{$index}}" ng-repeat="note in notifications" ng-class="{\'note-close\': note.close}" ng-class="note.animation">\t\t\t\t\t\t\t<span class="message" >{{note.message}}</span>\t\t\t\t\t\t\t<span class="'+iconClasses+' close-click" ng-click="close($index)"></span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t'},link:function(scope){var notifications=scope.notifications=[],autoHideDelay=notificationsConfig.getHideDelay()||3e3,autoHide=notificationsConfig.getAutoHide()||!1,autoHideAnimation=notificationsConfig.getAutoHideAnimation()||"",autoHideAnimationDelay=notificationsConfig.getAutoHideAnimationDelay()||1200,autoMaxNotifications=notificationsConfig.getAutoMaxNotifications()||!1,removeById=function(id){var found=-1;notifications.forEach(function(el,index){el.id===id&&(found=index,el.animation={},el.animation[autoHideAnimation]=!0,scope.$apply())}),found>=0&&scope.close(found)},removeOldNotifications=function(){notifications.shift()},notificationHandler=function(event,data,type,animation){var id,message,maxNotifications=autoMaxNotifications,hide=autoHide,hideDelay=autoHideDelay;if("object"==typeof data?(message=data.message,maxNotifications=data.maxNotifications||maxNotifications,hide=void 0===data.hide?autoHide:!!data.hide,hideDelay=data.hideDelay||hideDelay,type=void 0===data.class?type:data.class+" "+type):message=data,id="notif_"+(new Date).getTime(),maxNotifications&&notifications.length>=maxNotifications&&removeOldNotifications(),notifications.push({id:id,type:type,message:message,animation:animation}),hide)var timer=$timeout(function(){removeById(id),$timeout.cancel(timer)},hideDelay)};scope.$on("notifications:error",function(event,data){notificationHandler(event,data,"error")}),scope.$on("notifications:warning",function(event,data){notificationHandler(event,data,"warning")}),scope.$on("notifications:info",function(event,data){notificationHandler(event,data,"info")}),scope.$on("notifications:success",function(event,data){notificationHandler(event,data,"success")}),scope.$on("notifications:closeAll",function(){notifications.length=0}),scope.close=function(index){notifications[index].close=!0,$timeout(function(){notifications.splice(index,1)},autoHideAnimationDelay)}}}}]).directive("compile",["$compile",function($compile){return function(scope,element,attrs){scope.$watch(function(scope){return scope.$eval(attrs.compile)},function(value){element.html(value),$compile(element.contents())(scope)})}}]),module});